<!DOCTYPE html>
<html lang="zh_cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="用 hexo 和 github 搭建静态博客系统"/>




  <meta name="keywords" content="git," />





  <link rel="alternate" href="/default" title="点滴">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="https://blog.haohuan.org/2017/github-hexo/"/>


<meta name="description" content="许多人都希望自己有一个博客，但有时会觉得要搭个博客很繁琐，需要各种各样的环境，其中不知道还会出现什么错误信息，如果你曾经或者现在正有这样的想法，只要你跟着这篇文章动手起来，很快就能让你快速拥有自己的博客网站，记录生活的点滴。">
<meta property="og:type" content="article">
<meta property="og:title" content="用 hexo 和 github 搭建静态博客系统">
<meta property="og:url" content="https://blog.haohuan.org/2017/github-hexo/index.html">
<meta property="og:site_name" content="点滴">
<meta property="og:description" content="许多人都希望自己有一个博客，但有时会觉得要搭个博客很繁琐，需要各种各样的环境，其中不知道还会出现什么错误信息，如果你曾经或者现在正有这样的想法，只要你跟着这篇文章动手起来，很快就能让你快速拥有自己的博客网站，记录生活的点滴。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-04-18T23:30:54.000Z">
<meta property="article:modified_time" content="2021-06-12T18:26:36.931Z">
<meta property="article:author" content="haohuan">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> 用 hexo 和 github 搭建静态博客系统 - 点滴 </title>
  <meta name="generator" content="Hexo 4.2.1"></head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">点滴</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          用 hexo 和 github 搭建静态博客系统
        
      </h1>

      <time class="post-time">
          4月 18 2017
      </time>
    </header>



    
            <div class="post-content">
            <p>许多人都希望自己有一个博客，但有时会觉得要搭个博客很繁琐，需要各种各样的环境，其中不知道还会出现什么错误信息，如果你曾经或者现在正有这样的想法，只要你跟着这篇文章动手起来，很快就能让你快速拥有自己的博客网站，记录生活的点滴。</p>
<a id="more"></a>

<h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul>
<li>Git</li>
<li>NodeJs</li>
</ul>
<h3 id="配置github"><a href="#配置github" class="headerlink" title="配置github"></a>配置github</h3><ul>
<li>有一个github 账号</li>
<li>建立一个与你用户名对应的仓库，eg: yourUserName.github.io （挂载GitHub Pages，用于网站浏览）</li>
<li>建立一个在blog仓库用来存放源码</li>
<li>配置ssh-key</li>
</ul>
<h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><ul>
<li><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm install -g hexo-cli</span></span><br></pre></td></tr></table></figure></li>
<li><p>初始化Hexo<br><code>git clone blog仓库地址</code>  <code>&lt;folder&gt;</code> 到本地</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo init &lt;folder&gt;</span></span><br><span class="line"><span class="comment"># cd &lt;folder&gt;</span></span><br><span class="line"><span class="comment"># npm install</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo server</span></span><br><span class="line">[info] Hexo is running at http://localhost:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>

<p>这样在本地就能看到你的blog了, 这样就能在本地调试你的blog了</p>
</li>
</ul>
<h3 id="本地调试"><a href="#本地调试" class="headerlink" title="本地调试"></a>本地调试</h3>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo new "newPost" 新建文章</span></span><br><span class="line"><span class="comment"># vim newPost.md  编辑文章</span></span><br><span class="line"><span class="comment"># hexo new page "pageName" #新建页面</span></span><br><span class="line"><span class="comment"># hexo generate #生成静态页面至public目录</span></span><br><span class="line"><span class="comment"># hexo server #启动本地服务，进行文章预览调试</span></span><br></pre></td></tr></table></figure>

<h3 id="配置并发布"><a href="#配置并发布" class="headerlink" title="配置并发布"></a>配置并发布</h3><ul>
<li><p>新建一篇文章</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo new "My New Post"  //会在目录下生成 source\_posts\My-New-Post.md</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以用 <code>markdown</code> 语法来编写你的文章</p>
</blockquote>
</li>
<li><p>配置_config.yml<br>找到下面的内容</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>:</span><br></pre></td></tr></table></figure>
<p>  把它们修改为</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:yourUserName/yourUserName.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<br>  repository: 必须是SSH形式的url<br>  eg: <code>git@github.com:yourUserName/yourUserName.github.io.git</code><br>  而不能是HTTPS形式的url<br>  <code>https://github.com/yourUserName/yourUserName.github.io.git</code>，否则会出现错误<br>  如果你是为一个项目制作网站，那么需要把branch设置为gh-pages。</p>
</blockquote>
</li>
<li><p>发布</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo deploy</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h3><blockquote>
<p>将本地的博客源文件push到github仓库的时候自动触发发布</p>
</blockquote>
<ul>
<li>准备秘钥</li>
</ul>
<p>通过<code>ssh-keygen</code> 生成一对公钥密钥</p>
<p>在右上角个人资料中的 <code>Settings-&gt;SSH and GPG keys</code> 添加刚刚生成的公钥</p>
<p>在blog仓库的<code>Settings-&gt;Secrets</code>里添加刚刚生成的私钥，名称为 <code>ACTION_DEPLOY_KEY</code></p>
<ul>
<li>在<code>blog源码仓库</code>的Actions选项卡下点击新建workflow，编写如下配置。</li>
</ul>
<blockquote>
<p>这里的<code>blog 源码仓库</code>是用来存储博客源文件，上面那个<code>yourUserName.github.io</code>用于挂载GitHub Pages</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This is a basic workflow to help you get started with Actions</span></span><br><span class="line"></span><br><span class="line">name: CI</span><br><span class="line"></span><br><span class="line"><span class="comment"># Controls when the action will run. Triggers the workflow on push or pull request</span></span><br><span class="line"><span class="comment"># events but only for the master branch</span></span><br><span class="line">on: [push]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span></span><br><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">  <span class="comment"># This workflow contains a single job called "build"</span></span><br><span class="line">  build:</span><br><span class="line">    <span class="comment"># The type of runner that the job will run on</span></span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line"></span><br><span class="line">    name: A job to deploy blog.</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Steps represent a sequence of tasks that will be executed as part of the job</span></span><br><span class="line">    steps:</span><br><span class="line">    <span class="comment"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span></span><br><span class="line">    - uses: actions/checkout@v1</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Runs a single command using the runners shell</span></span><br><span class="line">    - name: Use Node.js 10.x</span><br><span class="line">      uses: actions/setup-node@v1</span><br><span class="line">      with:</span><br><span class="line">        node-version: <span class="string">"10.x"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Runs a set of commands using the runners shell</span></span><br><span class="line">    - name: Setup Hexo env</span><br><span class="line">      env:</span><br><span class="line">        ACTION_DEPLOY_KEY: <span class="variable">$&#123;&#123; secrets.ACTION_DEPLOY_KEY &#125;</span>&#125;</span><br><span class="line">      run: |</span><br><span class="line">        <span class="comment"># set up private key for deploy</span></span><br><span class="line">        mkdir -p ~/.ssh/</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$ACTION_DEPLOY_KEY</span>"</span> | tr -d <span class="string">'\r'</span> &gt; ~/.ssh/id_rsa <span class="comment"># 配置秘钥</span></span><br><span class="line">        chmod 600 ~/.ssh/id_rsa</span><br><span class="line">        ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><br><span class="line">        <span class="comment"># set git infomation</span></span><br><span class="line">        git config --global user.name <span class="string">'name'</span> <span class="comment"># 换成你自己的邮箱和名字</span></span><br><span class="line">        git config --global user.email <span class="string">'xxxx@qq.com'</span></span><br><span class="line">        <span class="comment"># install dependencies</span></span><br><span class="line">        npm i -g hexo-cli <span class="comment"># 安装hexo</span></span><br><span class="line">        npm i</span><br><span class="line">        hexo generate</span><br><span class="line"></span><br><span class="line">    - name: Deploy</span><br><span class="line">      run: |</span><br><span class="line">        <span class="comment"># publish</span></span><br><span class="line">        hexo deploy <span class="comment"># 执行部署程序</span></span><br></pre></td></tr></table></figure>


<h3 id="添加自定义域名解释"><a href="#添加自定义域名解释" class="headerlink" title="添加自定义域名解释"></a>添加自定义域名解释</h3><ul>
<li><p>把域名用CNAME的方法解析到 yourUserName.github.io.git.</p>
</li>
<li><p>在source文件夹里添加CNAME文件并添加你自己的域名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.yyy.zzz</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="日常部署步骤"><a href="#日常部署步骤" class="headerlink" title="日常部署步骤"></a>日常部署步骤</h3>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo clean</span></span><br><span class="line"><span class="comment"># hexo generate</span></span><br><span class="line"><span class="comment"># hexo deploy</span></span><br></pre></td></tr></table></figure>

<h3 id="添加“Fork-me-on-Github”-ribbon"><a href="#添加“Fork-me-on-Github”-ribbon" class="headerlink" title="添加“Fork me on Github” ribbon"></a>添加“Fork me on Github” ribbon</h3><p>  打开这个<a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="noopener">ribbon</a> 把a 标签的代码粘贴到 <code>themes\next\layout\layout.xxx</code> 中，放置在 最后，标签</body>之前即可，记得修改你的github<br>  地址</p>
<h3 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h3><ul>
<li>执行 hexo deploy 后,出现 error deployer not found:github 的错误<blockquote>
<p>hexo 更新到3.0之后，deploy的type 的github需要改成git, 接着<br>  npm install hexo-deployer-git –save 改了之后执行，然后再部署</p>
</blockquote>
</li>
</ul>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/git/">git</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/software-version-cycle/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">软件版本周期</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2021
    <span class="footer-author">haohuan.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear" target="_blank" rel="noopener">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
